<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPY</title>
    <script>
        function updateChart(){
            var element1 = document.getElementById("tech");
            var element2 = document.getElementById("chart");
            if (element1 != null && element2 != null){
                element1.parentNode.removeChild(element1);
                element2.parentNode.removeChild(element2);
            }

            var e = document.getElementById("ddlViewBy");
            var ticker = e.options[e.selectedIndex].value;
            tech = {
                "interval": "1W",
                "width": "100%",
                "height": "100%",
                "isTransparent": false,
                "symbol": ticker,
                "showIntervalTabs": true,
                "locale": "en",
                "colorTheme": "light"
            }
            
            chart = {
                "symbol": ticker,
                "width": "100%",
                "height": "30",
                "locale": "en",
                "dateRange": "12m",
                "colorTheme": "light",
                "trendLineColor": "#37a6ef",
                "underLineColor": "#E3F2FD",
                "isTransparent": false,
                "autosize": true,
                "largeChartUrl": ""
            }

            var script2= document.createElement('script');
            script2.type = "text/javascript";
            script2.setAttribute("async", "");
            script2.setAttribute("id", "chart");
            script2.text = JSON.stringify(tech);
            script2.src= 'https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js';
            document.getElementById('chartDiv').appendChild(script2);

            var script1= document.createElement('script');
            script1.type = "text/javascript";
            script1.setAttribute("async", "");
            script1.setAttribute("id", "tech");
            script1.text = JSON.stringify(tech);
            script1.src= 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js';
            document.getElementById('techDiv').appendChild(script1);
        }    
    </script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</head>
<body>
<nav class="navbar navbar-dark bg-dark">
    <span class="navbar-brand mb-0 h1">Mike's Indicators</span>
</nav>

<div class="container" style="margin-top: 10px;">
    <select id="ddlViewBy" onchange="updateChart()" class="custom-select">
        <option value="" selected="selected">Pick ticker</option>
        <option value="AMEX:SPY">SPY</option>
        <option value="NASDAQ:AAPL">AAPL</option>
        <option value="NASDAQ:FB">FB</option>
        <option value="NASDAQ:MSFT">MSFT</option>
        <option value="NASDAQ:NFLX">NFLX</option>
        <option value="NASDAQ:AMZN">AMZN</option>
        <option value="NASDAQ:GOOG">GOOG</option>
    </select>
    <div style="height:200px;">
        <div id ="chartDiv" class="tradingview-widget-container" style="height: 30px; margin-top: 10px;">
            <div class="tradingview-widget-container__widget"></div>
        </div>
    </div>

    <div style="height:375px;">
        <div id="techDiv" class="tradingview-widget-container" style="height: 360px; margin-top: 10px;">
            <div class="tradingview-widget-container__widget"></div>
        </div>
    </div>
</div>
</body>
</html>